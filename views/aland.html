<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SolidRoots Properties - Land Details</title>
    <link
      rel="shortcut icon"
      href="/assets/logo/solidroots properties logo c3-2.png"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
      body {
        background-color: #f5f5f5;
        color: #333;
      }

      .navbar-dark {
        background-color: #124824; /* Dark green background */
        padding: 1rem;
        letter-spacing: 0.5px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Slight shadow for elevation */
      }

      /* Logo Styling */
      .navbar-brand img {
        filter: drop-shadow(
          2px 2px 5px rgba(0, 0, 0, 0.3)
        ); /* Adds depth to the logo */
        transition: transform 0.3s ease; /* Smooth hover effect */
      }

      .navbar-brand img:hover {
        transform: scale(1.05); /* Slight zoom on hover */
      }

      /* Brand Text Styling */
      .navbar-dark .navbar-brand {
        font-size: 1.8rem;
        font-weight: bold;
        color: #fff;
        letter-spacing: 1px;
      }

      /* Nav Link Styles */
      .navbar-dark .nav-link {
        color: rgba(255, 255, 255, 0.85); /* Light white for readability */
        font-size: 1rem;
        font-weight: 500;
        margin: 5px 15px; /* Adds spacing between links */
        padding: 5px 10px; /* Slight padding for spacing */
        transition: all 0.3s ease; /* Smooth transition for hover effects */
      }

      /* Nav Link Hover Styles */
      .navbar-dark .nav-link:hover {
        color: #fff;
        background-color: #b78509; /* Gold background on hover */
        border-radius: 5px; /* Rounded corners for hover effect */
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Adds depth */
      }

      /* Navbar Toggler Styling */
      .navbar-toggler {
        border: none; /* Remove border around toggler */
      }

      .navbar-toggler-icon {
        filter: drop-shadow(
          1px 1px 2px rgba(0, 0, 0, 0.3)
        ); /* Subtle shadow for icon */
      }

      h1 {
        color: #124824;
        font-weight: bold;
      }

      .btn-primary {
        background-color: #b78509;
        border: none;
      }

      .btn-primary:hover {
        background-color: #124824;
        color: #fff;
      }

      .btn-secondary {
        background-color: #124824;
        color: #fff;
      }

      .btn-secondary:hover {
        background-color: #b78509;
        color: #fff;
      }

      .table {
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
      }

      .table thead {
        background-color: #124824;
        color: #fff;
        border-radius: 10px;
      }

      .table img {
        border-radius: 5px;
      }

      form {
        background-color: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
      }

      label {
        color: #124824;
        font-weight: bold;
      }
    </style>
  </head> 
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container">
        <!-- Brand Logo -->
        <a class="navbar-brand" href="#">
          <img
            src="/assets/logo/solidroots properties logo c3-2.png"
            alt="Logo"
            width="125"
            height="77"
          />
        </a>
        <!-- Mobile Toggler -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <!-- Navbar Links -->
        <div
          class="collapse navbar-collapse justify-content-center"
          id="navbarNav"
        >
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="adash.html">Dashboard</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="commercialt.html"
                >Commercial Property</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="atable.html">Residential Property</a>
            </li>
            <li class="nav-item">
                                  <a class="nav-link" href="create_land.html">Land Details</a>

            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container mt-5">
      <h1 class="text-center mb-4">Manage Land Properties</h1>
      <form id="landForm" class="mb-5">
        <div class="row">
          <div class="mb-3 col-md-6">
            <label for="location" class="form-label">Location</label>
            <input
              type="text"
              class="form-control"
              id="location"
              name="location"
              required
            />
          </div>
          <div class="mb-3 col-md-6">
            <label for="price" class="form-label">Price</label>
            <input
              type="text"
              class="form-control"
              id="price"
              name="price"
              required
            />
          </div>
        </div>
        <div class="row">
          <div class="mb-3 col-md-6">
            <label for="category" class="form-label">Category</label>
            <select class="form-select" id="category" name="category" required>
              <option value="Land">Land</option>
              <option value="Commercial">Commercial</option>
              <option value="Residential">Residential</option>
            </select>
          </div>
          <div class="mb-3 col-md-6">
            <label for="status" class="form-label">Status</label>
            <select class="form-select" id="status" name="status" required>
              <option value="For Sale">For Sale</option>
              <option value="For Rent">For Rent</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="mb-3 col-md-6">
            <label for="availability" class="form-label">Availability</label>
            <select class="form-select" id="availability" name="availability">
              <option value="Available">Available</option>
              <option value="Not Available">Not Available</option>
            </select>
          </div>
          <div class="mb-3 col-md-6">
            <label for="images" class="form-label"
              >Images (Comma-separated URLs)</label
            >
            <input type="text" class="form-control" id="images" name="images" />
          </div>
        </div>
        <div class="mb-3">
          <label for="description" class="form-label">Description</label>
          <textarea
            class="form-control"
            id="description"
            name="description"
            rows="3"
            required
          ></textarea>
        </div>
        <input type="hidden" id="landId" />
        <button type="submit" class="btn btn-primary">Save Land</button>
        <button type="button" class="btn btn-secondary" id="resetForm">
          Reset
        </button>
      </form>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Location</th>
            <th>Price</th>
            <th>Category</th>
            <th>Status</th>
            <th>Availability</th>
            <th>Description</th>
            <th>Images</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="landTable">
          <!-- Data populated dynamically -->
        </tbody>
      </table>
    </div>
    <script>
      const apiUrl = "https://srpropertiesbackend.vercel.app/api/lands"; // Replace with your backend endpoint

      // Fetch and display land properties
      const fetchLands = async () => {
        try {
          const response = await axios.get(apiUrl);
          const lands = response.data;
          const tableBody = document.getElementById("landTable");
          tableBody.innerHTML = "";

          lands.forEach((land) => {
            const row = `<tr>
                        <td>${land.location}</td>
                        <td>${land.price}</td>
                        <td>${land.category}</td>
                        <td>${land.status}</td>
                        <td>${land.availability}</td>
                        <td>${land.description}</td>
                        <td>
                            ${land.images
                              .map(
                                (image) =>
                                  `<img src="${image}" alt="Land Image" class="img-thumbnail" style="width: 100px; height: 100px;">`
                              )
                              .join("")}
                        </td>
                        <td>
                            <button class="btn btn-sm btn-warning" onclick="editLand('${
                              land._id
                            }')">Edit</button>
                            <button class="btn btn-sm btn-danger" onclick="deleteLand('${
                              land._id
                            }')">Delete</button>
                        </td>
                    </tr>`;
            tableBody.innerHTML += row;
          });
        } catch (error) {
          console.error("Error fetching land properties:", error);
        }
      };

      // Add or update land
      document
        .getElementById("landForm")
        .addEventListener("submit", async (e) => {
          e.preventDefault();

          const landId = document.getElementById("landId").value;
          const landData = {
            location: document.getElementById("location").value,
            price: document.getElementById("price").value,
            category: document.getElementById("category").value,
            status: document.getElementById("status").value,
            availability: document.getElementById("availability").value,
            description: document.getElementById("description").value,
            images: document.getElementById("images").value.split(","),
          };

          try {
            if (landId) {
              await axios.put(`${apiUrl}/${landId}`, landData);
            } else {
              await axios.post(apiUrl, landData);
            }

            document.getElementById("landForm").reset();
            fetchLands();
          } catch (error) {
            console.error("Error saving land:", error);
          }
        });

      // Edit land
      const editLand = async (id) => {
        try {
          const response = await axios.get(`${apiUrl}/${id}`);
          const land = response.data;

          document.getElementById("landId").value = land._id;
          document.getElementById("location").value = land.location;
          document.getElementById("price").value = land.price;
          document.getElementById("category").value = land.category;
          document.getElementById("status").value = land.status;
          document.getElementById("availability").value = land.availability;
          document.getElementById("description").value = land.description;
          document.getElementById("images").value = land.images.join(",");
        } catch (error) {
          console.error("Error fetching land:", error);
        }
      };

      // Delete land
      const deleteLand = async (id) => {
        try {
          await axios.delete(`${apiUrl}/${id}`);
          fetchLands();
        } catch (error) {
          console.error("Error deleting land:", error);
        }
      };

      // Reset form
      document.getElementById("resetForm").addEventListener("click", () => {
        document.getElementById("landForm").reset();
        document.getElementById("landId").value = "";
      });

      // Initial fetch
      fetchLands();
    </script>
  </body>
</html>
